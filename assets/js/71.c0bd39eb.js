(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{593:function(s,n,e){"use strict";e.r(n);var a=e(20),t=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),e("p",[s._v("本文其实是整合了DevUI团队的开源分享内容的部分，感谢DevUI团队和村长；内容较为简单，本文主要是为了梳理和增加记忆，同时也是分享给有需要的小伙伴，vue2.0的时代，公司内部组件库也是小编搭建的，其实算是轻车熟路了，包括里面用的一些底层的依赖（markdown-it、commander ），vue3.0依然不能错过，新技术学起来，开源起来")]),s._v(" "),e("p",[s._v("参考：")]),s._v(" "),e("p",[s._v("作者：DevUI团队")]),s._v(" "),e("p",[s._v("链接：https://juejin.cn/post/7024443197854056456")]),s._v(" "),e("h1",{attrs:{id:"搭建vue3-的组件库工程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#搭建vue3-的组件库工程"}},[s._v("#")]),s._v(" 搭建Vue3 的组件库工程")]),s._v(" "),e("p",[s._v("我们将使用：Vue3+TypeScript + Vite + Vitepress+Sass作为组件库的技术选型")]),s._v(" "),e("h2",{attrs:{id:"创建基础工程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建基础工程"}},[s._v("#")]),s._v(" 创建基础工程")]),s._v(" "),e("p",[s._v("直通车方式，直接指定模板")]),s._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[s._v("npm create vite mini"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("vtv"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ui "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("template vue"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ts\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("a",{attrs:{href:"https://cn.vitejs.dev/guide/#trying-vite-online",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考vite官网文档"),e("OutboundLink")],1)]),s._v(" "),e("h3",{attrs:{id:"安装依赖-本地启动-浏览器看效果"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖-本地启动-浏览器看效果"}},[s._v("#")]),s._v(" 安装依赖/本地启动/浏览器看效果")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cd mini-vtv-ui\nnpm install\nnpm run dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"构建生产包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构建生产包"}},[s._v("#")]),s._v(" 构建生产包")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('"build": "vue-tsc --noEmit && vite build",\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("生产构建的脚本，"),e("code",[s._v("vue-ts")]),s._v("模板和"),e("code",[s._v("vue")]),s._v("模板不一样的地方是，"),e("code",[s._v("vue-ts")]),s._v("模板增加了类型检查的命令：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("vue-tsc --noEmit\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("在构建的过程中，会检查有没有类型错误，并提示出来。")]),s._v(" "),e("h2",{attrs:{id:"关键文件介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关键文件介绍"}},[s._v("#")]),s._v(" 关键文件介绍")]),s._v(" "),e("p",[s._v("目录结构")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\n/kagol/vite-demo\n├── README.md\n├── index.html\n├── package.json\n├── public\n|  └── favicon.ico\n├── src\n|  ├── App.vue\n|  ├── assets\n|  |  └── logo.png\n|  ├── components\n|  |  └── HelloWorld.vue\n|  ├── env.d.ts // vue-ts模板\n|  └── main.ts\n├── tsconfig.json // vue-ts模板\n└── vite.config.ts\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br")])]),e("h3",{attrs:{id:"package-json"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#package-json"}},[s._v("#")]),s._v(" package.json")]),s._v(" "),e("p",[s._v("一个开源项目，首先关注的是它的"),e("code",[s._v("package.json")]),s._v("文件，里面有该项目的基本信息、脚本命令和依赖库等信息。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n  "name": "vite-demo",\n  "version": "0.0.0",\n  "scripts": {\n    "dev": "vite", // 本地启动\n    "build": "vue-tsc --noEmit && vite build", // 构建生产包，增加了vue-tsc类型检查 vue模板为 vite build\n    "serve": "vite preview" // 预览生产包效果\n  },\n  "dependencies": {\n    "vue": "^3.2.16"\n  },\n  "devDependencies": {\n    "@vitejs/plugin-vue": "^1.9.3", // 提供 Vue 3 单文件组件支持\n    "typescript": "^4.4.3", // vue-ts模板\n    "vite": "^2.6.4",\n    "vue-tsc": "^0.3.0" // volar的子包，vue3的ts类型检查工具（可选） vue-ts模板\n  }\n}\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("p",[s._v("一共有5个依赖")]),s._v(" "),e("p",[s._v("运行态依赖：vue")]),s._v(" "),e("p",[s._v("开发态依赖：")]),s._v(" "),e("ul",[e("li",[s._v("vite")]),s._v(" "),e("li",[s._v("@vitejs/plugin-vue 提供 Vue 3 单文件组件支持的vite插件")]),s._v(" "),e("li",[s._v("typescript")]),s._v(" "),e("li",[s._v("vue-tsc vue3的类型检查工具，可选")])]),s._v(" "),e("h3",{attrs:{id:"vite-config-ts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vite-config-ts"}},[s._v("#")]),s._v(" vite.config.ts")]),s._v(" "),e("p",[s._v("这个是vite的配置文件，里面主要引入了一个"),e("code",[s._v("@vitejs/plugin-vue")]),s._v("插件，用来为vue3单文件组件提供支持。")]),s._v(" "),e("p",[s._v("后续我们要支持"),e("code",[s._v("jsx")]),s._v("等其他功能，都可以通过配置相应的插件来提供支持。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [vue()]\n})\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"tsconfig-json"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tsconfig-json"}},[s._v("#")]),s._v(" tsconfig.json")]),s._v(" "),e("p",[s._v("这个文件是"),e("code",[s._v("vue-ts")]),s._v("模板才有的，用来提供TypeScript支持。主要指定了一些ts的编译选项和需要编译的文件/文件夹。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n  // 编译选项 https://www.tslang.cn/docs/handbook/compiler-options.html\n  "compilerOptions": {\n    "target": "esnext",              // 目标语言的版本\n    "useDefineForClassFields": true, // https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#the-usedefineforclassfields-flag-and-the-declare-property-modifier\n    "module": "esnext",              // 指定生成代码的模块标准\n    "moduleResolution": "node",      // 决定如何处理模块\n    "strict": true,                  // 启用所有严格类型检查选项\n    "jsx": "preserve",               // 在.tsx文件里支持JSX https://www.tslang.cn/docs/handbook/jsx.html\n    "sourceMap": true,               // 生成目标文件的sourceMap文件\n    "resolveJsonModule": true,       // 为了import json文件方便\n    "esModuleInterop": true,         // 为了import cjs文件方便 https://zhuanlan.zhihu.com/p/148081795\n    "lib": ["esnext", "dom"]         // 编译过程中需要引入的库文件的列表\n  },\n  \n  // 指定编译器需要编译的文件或文件夹\n  "include": ["src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue"]\n}\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("h3",{attrs:{id:"index-html"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#index-html"}},[s._v("#")]),s._v(" index.html")]),s._v(" "),e("p",[s._v("index.html是网站的入口文件，它和一般的html文件不太一样，引入"),e("code",[s._v("main.ts")]),s._v("文件入口ts文件的，标签是带有"),e("code",[s._v('type="module"')]),s._v("属性的，用来支持ES6模块。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <link rel="icon" href="/favicon.ico" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="module" src="/src/main.ts"><\/script>\n  </body>\n</html>\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("p",[s._v("没有加"),e("code",[s._v('type="module"')]),s._v("的话，浏览器控制台会报错：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Uncaught SyntaxError: Cannot use import statement outside a module\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"main-ts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#main-ts"}},[s._v("#")]),s._v(" main.ts")]),s._v(" "),e("p",[s._v("main.ts是vue的入口文件，主要创建了一个vue实例，并挂载到dom中。")]),s._v(" "),e("p",[s._v("这里可以用来安装vue插件。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"app-vue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#app-vue"}},[s._v("#")]),s._v(" App.vue")]),s._v(" "),e("p",[s._v("这个是Vue应用的根组件。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<script setup lang="ts">\n// This starter template is using Vue 3 <script setup> SFCs\n// Check out https://v3.vuejs.org/api/sfc-script-setup.html#sfc-script-setup\nimport HelloWorld from \'./components/HelloWorld.vue\'\n<\/script>\n\n<template>\n  <img alt="Vue logo" src="./assets/logo.png" />\n  <HelloWorld msg="Hello Vue 3 + TypeScript + Vite" />\n</template>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])]),e("h3",{attrs:{id:"env-d-ts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#env-d-ts"}},[s._v("#")]),s._v(" env.d.ts")]),s._v(" "),e("p",[s._v("vue组件的类型声明，不添加该文件会提示：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("找不到模块“./App.vue”或其相应的类型声明。\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"引入sass、jsx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#引入sass、jsx"}},[s._v("#")]),s._v(" 引入SASS、JSX")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm add -D sass\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm add -D @vitejs/plugin-vue-jsx\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("修改配置文件 vite.config.ts")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\n\n// 根据对各大组件库的做法来看，tsx更适合写较为复杂强的组件库，all in ts，将内容return要比SFC更加灵活\nimport vueJsx from '@vitejs/plugin-vue-jsx'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [\n    vue(),\n    vueJsx() // 新增\n  ]\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("h1",{attrs:{id:"增加vitepress文档系统"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#增加vitepress文档系统"}},[s._v("#")]),s._v(" 增加VitePress文档系统")]),s._v(" "),e("h2",{attrs:{id:"技术选型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#技术选型"}},[s._v("#")]),s._v(" 技术选型")]),s._v(" "),e("p",[s._v("由于我们使用的是Vite构建工具，因此需要选择一款与其配套的文档系统。")]),s._v(" "),e("p",[s._v("当从vue的生态上来说，需要决策的是选择"),e("a",{attrs:{href:"https://link.juejin.cn?target=https%3A%2F%2Fv2.vuepress.vuejs.org%2Fzh%2Fguide%2F",target:"_blank",rel:"noopener noreferrer"}},[s._v("VuePress"),e("OutboundLink")],1),s._v("还是"),e("a",{attrs:{href:"https://link.juejin.cn?target=https%3A%2F%2Fvitepress.vuejs.org%2F",target:"_blank",rel:"noopener noreferrer"}},[s._v("VitePress"),e("OutboundLink")],1),s._v("，最终我们选择VitePress，主要原因是：")]),s._v(" "),e("ul",[e("li",[s._v("VitePress是基于Vite的，而VuePress是基于Webpack的（也可以通过配置"),e("code",[s._v("bundler: '@vuepress/bundler-vite'")]),s._v("改成Vite构建）")]),s._v(" "),e("li",[s._v("VitePress更快更轻量，极易上手")])]),s._v(" "),e("p",[s._v("参考：")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://v2.vuepress.vuejs.org/zh/guide/#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E6%98%AF",target:"_blank",rel:"noopener noreferrer"}},[s._v("v2.vuepress.vuejs.org/zh/guide/#%…"),e("OutboundLink")],1)]),s._v(" "),e("h2",{attrs:{id:"添加vitepress文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加vitepress文档"}},[s._v("#")]),s._v(" 添加VitePress文档")]),s._v(" "),e("p",[s._v("安装vitepress：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm add -D vitepress\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("创建第一个文档：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mkdir docs && echo '# Hello VitePress' > docs/index.md\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("增加脚本命令：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n  "scripts": {\n    "docs:dev": "vitepress dev docs",\n    "docs:build": "vitepress build docs",\n    "docs:serve": "vitepress serve docs"\n  }\n}\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("本地启动：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm docs:dev\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"配置vitepress"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置vitepress"}},[s._v("#")]),s._v(" 配置VitePress")]),s._v(" "),e("p",[s._v("我们需要实现以下功能：")]),s._v(" "),e("ul",[e("li",[s._v("需要一个左侧菜单，用来展示我们有哪些组件")]),s._v(" "),e("li",[s._v("点击左侧菜单中的组件，可以展示这个组件的基本信息、Demo、API文档")])]),s._v(" "),e("h2",{attrs:{id:"配置sidebar"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置sidebar"}},[s._v("#")]),s._v(" 配置sidebar")]),s._v(" "),e("p",[s._v("VitePress有一个配置文件，里面有一个themeConfig/sidebar配置，可以配置左侧菜单。")]),s._v(" "),e("p",[s._v("docs/.vitepress/config.ts")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const sidebar = {\n  '/': [\n    { text: '快速开始', link: '/' },\n    {\n      text: '通用',\n      children: [\n        { text: 'Button 按钮', link: '/components/button/' },\n      ]\n    },\n    {\n      text: '导航',\n    },\n    {\n      text: '反馈',\n    },\n    {\n      text: '数据录入',\n    },\n    {\n      text: '数据展示',\n    },\n    {\n      text: '布局',\n    },\n  ]\n}\n\nconst config = {\n  themeConfig: {\n    sidebar,\n  }\n}\n\nexport default config\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br")])]),e("h2",{attrs:{id:"创建button组件的文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建button组件的文档"}},[s._v("#")]),s._v(" 创建Button组件的文档")]),s._v(" "),e("p",[s._v("404的原因是我们没有创建相应的文档")]),s._v(" "),e("p",[s._v("docs/component/button/index.md")]),s._v(" "),e("p",[s._v("先随便写一些内容")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# Button 按钮\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"在md中增加vue组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在md中增加vue组件"}},[s._v("#")]),s._v(" 在md中增加vue组件")]),s._v(" "),e("p",[s._v("VitePress的一大好处是可以直接在md中写vue组件，VitePress会将其渲染出来。")]),s._v(" "),e("p",[s._v("docs/components/button/index.md")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# Button 按钮\n\n<d-button></d-button>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"编写一个button组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编写一个button组件"}},[s._v("#")]),s._v(" 编写一个Button组件")]),s._v(" "),e("p",[s._v("devui/button/src/button.tsx")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const Button = () => <div>Button 按钮</div>\n\nexport default Button\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"引入button组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#引入button组件"}},[s._v("#")]),s._v(" 引入Button组件")]),s._v(" "),e("p",[s._v("docs/.vitepress/theme/index.ts")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import Theme from 'vitepress/dist/client/theme-default'\nimport Button from '../../../devui/button/src/button'\n\nexport default {\n  ...Theme,\n  enhanceApp({ app }) {\n    app.component('d-button', Button)\n  }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("h2",{attrs:{id:"报错：react-is-not-defined"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#报错：react-is-not-defined"}},[s._v("#")]),s._v(" 报错：React is not defined")]),s._v(" "),e("p",[s._v("这个报错是不是非常熟悉？没错！上一次直播我们也遇到过，相信聪明的你一定知道是怎么回事，也知道怎么解决啦~")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Uncaught (in promise) ReferenceError: React is not defined\n    at Button (button.tsx:1)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"引入jsx插件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#引入jsx插件"}},[s._v("#")]),s._v(" 引入jsx插件")]),s._v(" "),e("p",[s._v("安装jsx插件：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm add -D @vitejs/plugin-vue-jsx\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("code",[s._v("docs/vite.config.ts")]),s._v("中引入jsx插件：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import { defineConfig } from 'vite'\nimport vueJsx from '@vitejs/plugin-vue-jsx'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [vueJsx()]\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h1",{attrs:{id:"增加demo代码展开-收起功能"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#增加demo代码展开-收起功能"}},[s._v("#")]),s._v(" 增加demo代码展开/收起功能")]),s._v(" "),e("h2",{attrs:{id:"引入背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#引入背景"}},[s._v("#")]),s._v(" 引入背景")]),s._v(" "),e("p",[s._v("早期进行组件开发的时候，demo展示部分需要用`````包裹展示的代码块，另外组件的显示也需要同样的代码，所以同样的代码写了两遍，非常的不“银杏”。")]),s._v(" "),e("p",[s._v("这块小编亲身经历")]),s._v(" "),e("h2",{attrs:{id:"安装vitepress-theme-demoblock依赖"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装vitepress-theme-demoblock依赖"}},[s._v("#")]),s._v(" 安装vitepress-theme-demoblock依赖")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("yarn add -D vitepress-theme-demoblock\n复制代码\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"配置-demoblockplugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置-demoblockplugin"}},[s._v("#")]),s._v(" 配置 demoBlockPlugin")]),s._v(" "),e("p",[s._v("docs/.vitepress/config.ts")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import { demoBlockPlugin } from 'vitepress-theme-demoblock'\n\nconst config = {\n  themeConfig: {\n    sidebar,\n  },\n  \n  // 以下是新增的\n  markdown: {\n    config: (md) => {\n      // 这里可以使用 markdown-it 插件，vitepress-theme-demoblock就是基于此开发的\n      md.use(demoBlockPlugin)\n    }\n  }\n}\n复制代码\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("h2",{attrs:{id:"配置-vitepress-rc-脚本命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置-vitepress-rc-脚本命令"}},[s._v("#")]),s._v(" 配置 vitepress-rc 脚本命令")]),s._v(" "),e("p",[s._v("自动生成"),e("code",[s._v("docs/.vitepress/theme/register-components.js")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('"register:components": "vitepress-rc"\n复制代码\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"注册demo-demoblock组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注册demo-demoblock组件"}},[s._v("#")]),s._v(" 注册Demo/DemoBlock组件")]),s._v(" "),e("p",[s._v("docs/.vitepress/theme/index.ts")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("/*\n * @Details: 主题文件入口，这里需要注册所有我们的UI组件\n */\nimport Theme from 'vitepress/dist/client/theme-default'\nimport Tree from '../../../library/tree'\n// 主题样式\nimport 'vitepress-theme-demoblock/theme/styles/index.css'\n// vitepress-theme-demoblock插件的组件注册\nimport { registerComponents } from './register-components.js'\n\nexport default {\n  ...Theme,\n  enhanceApp({ app }) {\n    app.use(Tree)\n    registerComponents(app)\n  }\n}\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br")])]),e("h2",{attrs:{id:"编写demo展开-收起的md文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编写demo展开-收起的md文档"}},[s._v("#")]),s._v(" 编写demo展开/收起的md文档")]),s._v(" "),e("p",[s._v("docs/components/button/index.md")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# Button 按钮\n\n:::demo XXX\n\n​```vue\n<template>\n  <d-button></d-button>\n</template>\n//```\n:::\n复制代码\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("h1",{attrs:{id:"搭建devui-cli快速创建组件模板"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#搭建devui-cli快速创建组件模板"}},[s._v("#")]),s._v(" 搭建DevUI CLI快速创建组件模板")]),s._v(" "),e("h2",{attrs:{id:"安装依赖"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[s._v("#")]),s._v(" 安装依赖")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("yarn add -D commander inquirer fs-extra kolorist esbuild\n复制代码\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"开发命令脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开发命令脚本"}},[s._v("#")]),s._v(" 开发命令脚本")]),s._v(" "),e("p",[s._v("devui-cli/index.js")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#!/usr/bin/env node\nimport { Command } from 'commander'\nimport { onCreate } from './commands/create'\n\n// 创建命令对象\nconst program = new Command()\n\n// 注册命令、参数、回调\nprogram\n  // 注册 create 命令\n  .command('create')\n  // 添加命令描述\n  .description('创建一个组件模板或配置文件')\n  // 添加命令参数 -t | --type <type> ，<type> 表示该参数必填，[type] 表示选填\n  .option('-t --type <type>', `创建类型，可选值：component, lib-entry`)\n  // 注册命令回调\n  .action(onCreate)\n\n// 执行命令行参数解析\nprogram.parse()\n复制代码\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])]),e("p",[s._v("devui-cli/commands/create.js")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("import inquirer from 'inquirer'\nimport { red } from 'kolorist'\n\n// create type 支持项\nconst CREATE_TYPES = ['component', 'lib-entry']\n// 文档分类\nconst DOCS_CATEGORIES = ['通用', '导航', '反馈', '数据录入', '数据展示', '布局']\n\nexport async function onCreate(cmd = {}) {\n  let { type } = cmd\n\n  // 如果没有在命令参数里带入 type 那么就询问一次\n  if (!type) {\n    const result = await inquirer.prompt([\n      {\n        // 用于获取后的属性名\n        name: 'type',\n        // 交互方式为列表单选\n        type: 'list',\n        // 提示信息\n        message: '（必填）请选择创建类型：',\n        // 选项列表\n        choices: CREATE_TYPES,\n        // 默认值，这里是索引下标\n        default: 0\n      }\n    ])\n    // 赋值 type\n    type = result.type\n  }\n\n  // 如果获取的类型不在我们支持范围内，那么输出错误提示并重新选择\n  if (CREATE_TYPES.every((t) => type !== t)) {\n    console.log(\n      red(`当前类型仅支持：${CREATE_TYPES.join(', ')}，收到不在支持范围内的 \"${type}\"，请重新选择！`)\n    )\n    return onCreate()\n  }\n\n  try {\n    switch (type) {\n      case 'component':\n        // 如果是组件，我们还需要收集一些信息\n        const info = await inquirer.prompt([\n          {\n            name: 'name',\n            type: 'input',\n            message: '（必填）请输入组件 name ，将用作目录及文件名：',\n            validate: (value) => {\n              if (value.trim() === '') {\n                return '组件 name 是必填项！'\n              }\n              return true\n            }\n          },\n          {\n            name: 'title',\n            type: 'input',\n            message: '（必填）请输入组件中文名称，将用作文档列表显示：',\n            validate: (value) => {\n              if (value.trim() === '') {\n                return '组件名称是必填项！'\n              }\n              return true\n            }\n          },\n          {\n            name: 'category',\n            type: 'list',\n            message: '（必填）请选择组件分类，将用作文档列表分类：',\n            choices: DOCS_CATEGORIES,\n            default: 0\n          }\n        ])\n\n        createComponent(info)\n        break\n      case 'lib-entry':\n        createLibEntry()\n        break\n      default:\n        break\n    }\n  } catch (e) {\n    console.log(red('✖') + e.toString())\n    process.exit(1)\n  }\n}\n\nfunction createComponent(info) {\n  // 输出收集到的组件信息\n  console.log(info)\n}\n\nfunction createLibEntry() {\n  console.log('create lib-entry file.')\n}\n复制代码\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br"),e("span",{staticClass:"line-number"},[s._v("62")]),e("br"),e("span",{staticClass:"line-number"},[s._v("63")]),e("br"),e("span",{staticClass:"line-number"},[s._v("64")]),e("br"),e("span",{staticClass:"line-number"},[s._v("65")]),e("br"),e("span",{staticClass:"line-number"},[s._v("66")]),e("br"),e("span",{staticClass:"line-number"},[s._v("67")]),e("br"),e("span",{staticClass:"line-number"},[s._v("68")]),e("br"),e("span",{staticClass:"line-number"},[s._v("69")]),e("br"),e("span",{staticClass:"line-number"},[s._v("70")]),e("br"),e("span",{staticClass:"line-number"},[s._v("71")]),e("br"),e("span",{staticClass:"line-number"},[s._v("72")]),e("br"),e("span",{staticClass:"line-number"},[s._v("73")]),e("br"),e("span",{staticClass:"line-number"},[s._v("74")]),e("br"),e("span",{staticClass:"line-number"},[s._v("75")]),e("br"),e("span",{staticClass:"line-number"},[s._v("76")]),e("br"),e("span",{staticClass:"line-number"},[s._v("77")]),e("br"),e("span",{staticClass:"line-number"},[s._v("78")]),e("br"),e("span",{staticClass:"line-number"},[s._v("79")]),e("br"),e("span",{staticClass:"line-number"},[s._v("80")]),e("br"),e("span",{staticClass:"line-number"},[s._v("81")]),e("br"),e("span",{staticClass:"line-number"},[s._v("82")]),e("br"),e("span",{staticClass:"line-number"},[s._v("83")]),e("br"),e("span",{staticClass:"line-number"},[s._v("84")]),e("br"),e("span",{staticClass:"line-number"},[s._v("85")]),e("br"),e("span",{staticClass:"line-number"},[s._v("86")]),e("br"),e("span",{staticClass:"line-number"},[s._v("87")]),e("br"),e("span",{staticClass:"line-number"},[s._v("88")]),e("br"),e("span",{staticClass:"line-number"},[s._v("89")]),e("br"),e("span",{staticClass:"line-number"},[s._v("90")]),e("br"),e("span",{staticClass:"line-number"},[s._v("91")]),e("br"),e("span",{staticClass:"line-number"},[s._v("92")]),e("br"),e("span",{staticClass:"line-number"},[s._v("93")]),e("br"),e("span",{staticClass:"line-number"},[s._v("94")]),e("br"),e("span",{staticClass:"line-number"},[s._v("95")]),e("br"),e("span",{staticClass:"line-number"},[s._v("96")]),e("br"),e("span",{staticClass:"line-number"},[s._v("97")]),e("br"),e("span",{staticClass:"line-number"},[s._v("98")]),e("br")])]),e("h2",{attrs:{id:"添加脚本命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加脚本命令"}},[s._v("#")]),s._v(" 添加脚本命令")]),s._v(" "),e("p",[s._v("package.json")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n    // --bundle 标识打包的入口文件\n    // --format 转换为目标格式代码\n    // --platform 目标平台，默认 browser\n    // --outdir 输出目录\n    // 开发时实时编译\n    "dev": "esbuild --bundle ./src/index.js --format=cjs --platform=node --outdir=./lib --watch",\n    // 打包命令\n    "build": "esbuild --bundle ./src/index.js --format=cjs --platform=node --outdir=./lib",\n    // 执行 create 命令，如果有多个命令，可以去掉 create ，使用时再传入\n    "cli": "node ./lib/index.js create"\n}\n复制代码\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[s._v("交互模式执行：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("yarn cli\n复制代码\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("带参数直接执行：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("yarn cli -t component // -t 是 --type 的别名\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h1",{attrs:{id:"主题样式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#主题样式"}},[s._v("#")]),s._v(" 主题样式")]),s._v(" "),e("h1",{attrs:{id:"国际化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#国际化"}},[s._v("#")]),s._v(" 国际化")])])}),[],!1,null,null,null);n.default=t.exports}}]);